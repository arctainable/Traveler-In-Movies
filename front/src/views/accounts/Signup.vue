<template>
    <div>
      <section>
			<div class="containers">
				<div class="logindiv center-block mt40">
					<h3>ê°€ì…í•˜ê¸°</h3>
																<!-- ì²´í¬ë°•ìŠ¤ -->
						<div class="join-uptext">ğŸ‘‹ì—¬í–‰ê°€ê³  ì‹¶ì€ êµ­ê°€(ë„ì‹œ) 3ê°œë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”!ğŸ‘‹</div>
						<p>âœˆï¸ì„ íƒí•œ ìˆœì„œëŒ€ë¡œ ìˆœìœ„ê°€ ì •í•´ì§‘ë‹ˆë‹¤(3ê°œ)âœˆï¸</p>
						<p>âœ…ì„¸ê°œ ë‚˜ë¼ë¥¼ ì„ íƒí•œ í›„ "í™•ì •" ì„ ëˆŒëŸ¬ì£¼ì„¸ìš”âœ…</p>
						<div style="font-size:14px; algin-items: center;">
							<input type="checkbox" id="ë¸Œë¼ì§ˆ" value="Brazil" v-model="preference"> <label for="ë¸Œë¼ì§ˆ">ë¸Œë¼ì§ˆ</label><img src="https://img.icons8.com/emoji/20/000000/brazil-emoji.png"/>
							<input type="checkbox" id="ì½œë¡¬ë¹„ì•„" value="Colombia" v-model="preference"> <label for="ì½œë¡¬ë¹„ì•„">ì½œë¡¬ë¹„ì•„</label><img src="https://img.icons8.com/emoji/20/000000/colombia-emoji.png"/>
							<input type="checkbox" id="ë©•ì‹œì½”" value="Mexico" v-model="preference"> <label for="ë©•ì‹œì½”">ë©•ì‹œì½”</label><img src="https://img.icons8.com/emoji/20/000000/mexico-emoji.png"/>
							<input type="checkbox" id="ë¼ìŠ¤ë² ì´ê±°ìŠ¤" value="LA" v-model="preference"> <label for="ë¼ìŠ¤ë² ì´ê±°ìŠ¤">ë¼ìŠ¤ë² ì´ê±°ìŠ¤</label><img src="https://img.icons8.com/emoji/20/000000/united-states-emoji.png"/><br>
							<input type="checkbox" id="ì›Œì‹±í„´" value="Washington" v-model="preference"> <label for="ì›Œì‹±í„´">ì›Œì‹±í„´</label><img src="https://img.icons8.com/emoji/20/000000/united-states-emoji.png"/>
							<input type="checkbox" id="ì‹œì¹´ê³ " value="Chicago" v-model="preference"> <label for="ì‹œì¹´ê³ ">ì‹œì¹´ê³ </label><img src="https://img.icons8.com/emoji/20/000000/united-states-emoji.png"/>
							<input type="checkbox" id="ìºë‚˜ë‹¤" value="Canada" v-model="preference"> <label for="ìºë‚˜ë‹¤">ìºë‚˜ë‹¤</label><img src="https://img.icons8.com/emoji/20/000000/united-states-emoji.png"/>
							<input type="checkbox" id="ì¹ ë ˆ" value="Chile" v-model="preference"> <label for="ì¹ ë ˆ">ì¹ ë ˆ</label><img src="https://img.icons8.com/emoji/20/000000/chile-emoji.png"/><br>
							<input type="checkbox" id="ì¼ë³¸" value="Japan" v-model="preference"> <label for="ì¼ë³¸">ì¼ë³¸</label><img src="https://img.icons8.com/emoji/20/000000/japan-emoji.png"/>
							<input type="checkbox" id="í™ì½©" value="Hongkong" v-model="preference"> <label for="í™ì½©">í™ì½©</label><img src="https://img.icons8.com/emoji/20/000000/hong-kong-sar-china-emoji.png"/>
							<input type="checkbox" id="ì¤‘êµ­" value="China" v-model="preference"> <label for="ì¤‘êµ­">ì¤‘êµ­</label><img src="https://img.icons8.com/emoji/20/000000/china-emoji.png"/>
							<input type="checkbox" id="ì¸ë„" value="India" v-model="preference"> <label for="ì¸ë„">ì¸ë„</label><img src="https://img.icons8.com/emoji/20/000000/india-emoji.png"/><br>
							<input type="checkbox" id="í˜¸ì£¼" value="Australia" v-model="preference"> <label for="í˜¸ì£¼">í˜¸ì£¼</label><img src="https://img.icons8.com/emoji/20/000000/australia-emoji.png"/>
							<input type="checkbox" id="ë‰´ì§ˆëœë“œ" value="NewZleand" v-model="preference"> <label for="ë‰´ì§ˆëœë“œ">ë‰´ì§ˆëœë“œ</label><img src="https://img.icons8.com/emoji/20/000000/new-zealand-emoji.png"/>
							<input type="checkbox" id="ì˜êµ­" value="UK" v-model="preference"> <label for="ì˜êµ­">ì˜êµ­</label><img src="https://img.icons8.com/emoji/20/000000/united-kingdom-emoji.png"/>
							<input type="checkbox" id="í”„ë‘ìŠ¤" value="France" v-model="preference"> <label for="í”„ë‘ìŠ¤">í”„ë‘ìŠ¤</label><img src="https://img.icons8.com/emoji/20/000000/france-emoji.png"/><br>
							<input type="checkbox" id="ì´íƒˆë¦¬ì•„" value="Italy" v-model="preference"> <label for="ì´íƒˆë¦¬ì•„">ì´íƒˆë¦¬ì•„</label><img src="https://img.icons8.com/emoji/20/000000/italy-emoji.png"/>
							<input type="checkbox" id="ë‚¨ì•„í”„ë¦¬ì¹´ê³µí™”êµ­" value="SouthAfrica" v-model="preference"> <label for="ë‚¨ì•„í”„ë¦¬ì¹´ê³µí™”êµ­">ë‚¨ì•„ê³µ</label><img src="https://img.icons8.com/emoji/20/000000/south-africa-emoji.png"/>
							<input type="checkbox" id="ì†Œë§ë¦¬ì•„" value="Somalia" v-model="preference"> <label for="ì†Œë§ë¦¬ì•„">ì†Œë§ë¦¬ì•„</label><img src="https://img.icons8.com/emoji/20/000000/somalia-emoji.png"/>
							<input type="checkbox" id="ëª¨ë¡œì½”" value="Moroco" v-model="preference"> <label for="ëª¨ë¡œì½”">ëª¨ë¡œì½”</label><img src="https://img.icons8.com/emoji/20/000000/morocco-emoji.png"/>
							<p>â—â—ì„ í˜¸ë„ ìˆœìœ„â—â—</p>
							<p>1ï¸âƒ£: {{ preference[0] }}</p>
							<p>2ï¸âƒ£: {{ preference[1] }}</p>
							<p>3ï¸âƒ£: {{ preference[2] }}</p>
							ì„ íƒí•œ êµ­ê°€(ë„ì‹œ) ìˆ˜: {{this.preference.length }}ê°œ <b-button pill variant="outline-info" @click="che()">í™•ì •</b-button>
						</div>
						<div class="the_line"></div>
					<form name="loginform">
						<div class="join-uptext">ì•„ì´ë””</div>
						<div class="login-info-div">
							<input type="text" name="username" id="username" v-model="credentials.username" placeholder="ì•„ì´ë””ëŠ” ì˜ë¬¸ ëŒ€ì†Œë¬¸ì 5~15ì ì´ë‚´ë¡œ ìƒì„± ê°€ëŠ¥í•©ë‹ˆë‹¤." >
							<span id="msg1" style="color:#f00"></span>
						</div>
						<!-- ë‹‰ë„¤ì„ ì¶”ê°€ -->
						<div class="join-uptext">ë‹‰ë„¤ì„</div>
						<div class="login-info-div">
							<input type="text" name="nickname" id="nickname" v-model="credentials.nickname" placeholder="ë‹‰ë„¤ì„ì€ ì˜ë¬¸ ëŒ€ì†Œë¬¸ì 5~15ì ì´ë‚´ë¡œ ìƒì„± ê°€ëŠ¥í•©ë‹ˆë‹¤." >
							<span id="msg2" style="color:#f00"></span>
						</div>
						<!--  -->
						<div class="join-uptext">ë¹„ë°€ë²ˆí˜¸</div>
						<div class="login-info-div">
							<input type="password" name="pw" id="pw" v-model="credentials.password" placeholder="ë¹„ë°€ë²ˆí˜¸ëŠ” ì˜ë¬¸ ëŒ€ì†Œë¬¸ì 8~15ì ì´ë‚´ë¡œ ìƒì„± ê°€ëŠ¥í•©ë‹ˆë‹¤.">
							<span id="msg3" style="color:#f00"></span>
						</div>
						<div class="login-info-div">
							<input type="password" name="pw2" id="pw2" v-model="credentials.passwordConfirmation" placeholder="ë¹„ë°€ë²ˆí˜¸ë¥¼ í™•ì¸í•©ë‹ˆë‹¤">
							<span id="msg4" style="color:#f00"></span>
						</div>






						<!-- ì´ë©”ì¼ X -->
						<!-- <div class="join-uptext">ì´ë©”ì¼</div>
						<div class="login-info-div">
							<input type="email" name="email" id="email" v-model="credentials.email" placeholder="ì‚¬ìš©í•˜ì‹¤ ì´ë©”ì¼ì„ ì…ë ¥í•´ì£¼ì„¸ìš”">
							<span id="msg5" style="color:#f00"></span>
						</div> -->
						<div class="">
							<label for="allcheck" class="pointer join-checkbox-label pull-left">
								<input id="allcheck" type="checkbox" name="allcheck"><span>ì „ì²´ ë™ì˜</span>
							</label>
							<div class="clearfix"></div>
						</div>
						<div class="the_line"></div>
						<div class="join-checkbox">
							<ul class="list-unstyled">
								<li>
									<label for="ok" class="pointer join-checkbox-label pull-left">
										<input id="ok" type="checkbox" name="ok"><span>  ì´ìš© ì•½ê´€ ë™ì˜</span>
									</label>
									<div class="pull-right">
										<a id="ok-btn" class="pointer">ë‚´ìš©ë³´ê¸°</a>
									</div>
									<div class="clearfix"></div>
								</li>
								<li>
									<label for="ok2" class="pointer join-checkbox-label pull-left">
										<input id="ok2" type="checkbox" name="ok2"><span>ê°œì¸ ì •ë³´ ìˆ˜ì§‘,ì´ìš© ë™ì˜</span>
									</label>
									<div class="pull-right">
										<a id="ok2-btn" class="pointer">ë‚´ìš©ë³´ê¸°</a>
									</div>
									<div class="clearfix"></div>
								</li>
								<li>
									<label for="ok3" class="pointer join-checkbox-label pull-left">
										<input id="ok3" type="checkbox" name="ok3"><span>ë§Œ 14ì„¸ ì´ìƒì…ë‹ˆë‹¤.</span>
									</label>
									<div class="clearfix"></div>
								</li>
							</ul>
						</div>
						<div class="login-submit-div mt40">
							<a onclick="goJoin()" @click="signup" class="pointer">ê°€ì…í•˜ê¸°</a>
						</div>
					</form>





					<div class="mt10 small-join">
						<span>ì´ë¯¸ ê³„ì •ì´ ìˆë‹¤ë©´? <router-link :to="{ name: 'Login' }">ë¡œê·¸ì¸í•˜ëŸ¬ê°€ê¸°</router-link></span>
					</div>
				</div>
			</div>
		</section>
		
		<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
			<div class="modal-dialog" >
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
						<h4 class="modal-title" id="myModalLabel"></h4>
					</div>
					<div class="modal-body" style="overflow:hidden;">
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
					</div>
				</div>
			</div>
		</div>
    </div>
</template>
<script>
import axios from 'axios'
import 'bootstrap'
// npm i vue-swal í•„ìš”
import swal from "sweetalert";

// import { BootstrapVue, IconsPlugin } from 'bootstrap-vue'
// npm update vue-template-compiler í•„ìš”

export default {
  name: 'Signup',
  data: function () {
		return {
			preference: [],
			credentials: {
				username: null,
				nickname: null,
        password: null,
        passwordConfirmation: null,
				user_preference: '',
      }
    }
  },
  methods: {
		che: function () {
			for (let a = 0; a < this.preference.length; a++) {
				this.credentials.user_preference += this.preference[a]
				this.credentials.user_preference += '.'
				console.log(this.credentials.user_preference)
			}
		},
		refreshPreference: function () {
			this.credentials.user_preference = ''
		},
    signup: function () {
      axios({
        method: 'post',
        url: 'http://127.0.0.1:8000/accounts/signup/',
        data: this.credentials
      })
        .then(() => {
          this.$router.push({ name: 'Login'})
        })
				// backì—ì„œ í™•ì¸í›„ ê°€ì ¸ì˜¨ ì—ëŸ¬ë¡œ íŒì—…ì°½ ë„ìš°ê¸°
        .catch(err => {
					// console.log(err.response)
          swal(err.response.data.error, {
            dangerMode: true,
          }),
					this.refreshPreference()
      })
    },
		watch: {
			preference: function () {
				if (this.preference.length > 3) {
					alert('3ê°€ì§€ êµ­ê°€(ë„ì‹œ)ë¥¼ ì„ íƒí–ˆëŠ”ì§€ ë‹¤ì‹œ í™•ì¸í•´ì£¼ì„¸ìš”ğŸ˜«')
					this.preference=[]
					this.credentials.user_preference = ''
			}
			}
		}
	},
	// computed: {
  //   preference: function () {
  //     return this.credentials.user_preference += this.preference[this.preference.length -1]
  //   }
  // },
}
</script>

<style scoped>
.containers {
	width:80%;
	margin:auto;
}
</style>
<style scoped>
html {
	background: #37373d;
}
body {
	background: #37373d;
}
#app {
	background: #37373d;
}
section {
  height:1400px;
	background: #37373d;
}
</style>
